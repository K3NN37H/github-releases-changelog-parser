const h="2.17.0";function _(t){if(!t.data)return{...t,data:[]};if(!("total_count"in t.data&&!("url"in t.data)))return t;const e=t.data.incomplete_results,a=t.data.repository_selection,o=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const i=Object.keys(t.data)[0],d=t.data[i];return t.data=d,typeof e!="undefined"&&(t.data.incomplete_results=e),typeof a!="undefined"&&(t.data.repository_selection=a),t.data.total_count=o,t}function l(t,n,e){const a=typeof n=="function"?n.endpoint(e):t.request.endpoint(n,e),o=typeof n=="function"?n:t.request,i=a.method,d=a.headers;let c=a.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!c)return{done:!0};try{const u=await o({method:i,url:c,headers:d}),r=_(u);return c=((r.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:r}}catch(u){if(u.status!==409)throw u;return c="",{value:{status:200,headers:{},data:[]}}}}})}}function f(t,n,e,a){return typeof e=="function"&&(a=e,e=void 0),s(t,[],l(t,n,e)[Symbol.asyncIterator](),a)}function s(t,n,e,a){return e.next().then(o=>{if(o.done)return n;let i=!1;function d(){i=!0}return n=n.concat(a?a(o.value,d):o.value.data),i?n:s(t,n,e,a)})}const g=Object.assign(f,{iterator:l});function y(t){return{paginate:Object.assign(f.bind(null,t),{iterator:l.bind(null,t)})}}y.VERSION=h;export{y as paginateRest};
